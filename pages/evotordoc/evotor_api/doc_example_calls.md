---
title: Примеры запросов к Облаку Эвотор
keywords:
summary: "Раздел содержит примеры запросов к Эвотор API и вебхуков облака Эвотор."
sidebar: evotordoc_sidebar
permalink: doc_example_calls.html
tags: [Cloud, products]
folder: evotor_api
---

С помощью API Облака Эвотор сторонние сервисы могут получить доступ к данным пользователей платформы, которые хранятся в облаке Эвотор.

Обращаясь к Облаку сторонние сервисы могут:

* искать магазины, сотрудников и смарт терминалы пользователя платформы;
* в рамках выбранного магазина:

  * получать и передавать информацию о товарах;
  * удалять товары;
  * получать документы смарт-терминалов;
  * создавать схемы и дополнительные поля товаров.

## Примеры запросов к Облаку Эвотор {#evotorApi}

### Получить список всех магазинов пользователя {#getStores}

Для выполнения этого запроса вам потребуется [токен приложения](./doc_authorization.html).

Запрос:

```
curl -X GET \
  https://api.evotor.ru/api/v1/inventories/stores/search \
  -H 'x-authorization: <токен приложения>'
```

Ответ:

```JSON
[
  {
    "uuid": "<идентификатор магазина>",
    "address": null,
    "name": "Мой магазин1",
    "code": null
  },
]
```

### Создать новый товар в определённом магазине

Для выполнения этого запроса вам потребуется [токен приложения](./doc_authorization.html) и идентификатор магазина, который вы можете получить с помощью [предыдущего запроса](./doc_example_calls.html#getStores).

Создать новый товар в определённом магазине:

```
curl -X POST \
  https://api.evotor.ru/api/v1/inventories/stores/<идентификатор магазина>/products \
  -H 'accept: application/json' \
  -H 'content-type: application/json' \
  -H 'x-authorization: <токен приложения>' \
  -d '[
  {
    "uuid": "01ba18b6-8707-5f47-3d9c-4db058054cb2",
    "code": "6",
    "barCodes": [
      "2000000000060"
    ],
    "alcoCodes": [
      "0000000000000000001"
    ],
    "name": "Сидр",
    "price": 123.12,
    "quantity": 12,
    "costPrice": 100.123,
    "measureName": "шт",
    "tax": "VAT_18",
    "allowToSell": true,
    "description": "Вкусный яблочный сидр.",
    "articleNumber": "сид123",
    "parentUuid": "1ddea16b-971b-dee5-3798-1b29a7aa2e27",
    "group": false,
    "type": "ALCOHOL_NOT_MARKED",
    "alcoholByVolume": 5.45,
    "alcoholProductKindCode": 123,
    "tareVolume": 0.57
  }
]'
```

```
no content
```

При создании товаров в ответ приходит пустое сообщение. Код ответа в случае удачного добавления – 200.

## Примеры вебхуков, которые Облако передаёт в сторонний сервис {#webhooks}

Все изменения в [Личном кабинете пользователя](https://lk.evotor.ru/web/login) (например, создание магазина или регистрация смарт-терминала) Облако Эвотор может передавать в сторонний сервис, с помощью вебхуков.

Подписка на вебхуки позволяет:

* Регистрировать или авторизовывать учётные записи в стороннем сервисе.
* Активировать и деактивировать тарифы за использование стороннего сервиса.
* Редактировать магазины, сотрудников и смарт-терминалы пользователей в стороннем сервисе.
* Передавать в сторонний сервис чеки (упрощённые документы) и документы смарт-терминалов.
* Получать и передавать номенклатуру.

### Вебхук-запрос на авторизацию учётной записи стороннего сервиса

Для выполнения этого запроса облаку потребуется [токен стороннего сервиса](./doc_evotor_api_authorization.html#serverToken).

Запрос:

```
-X POST --header 'Content-Type: application/json' --header 'Accept: application/json' --header 'Authorization: Basic <токен стороннего сервиса>' -d '{"userUuid":"01-000000000000001","username":"<Имя учётной записи>","password":"<пароль учётной записи>","customField":"любое значение"}' 'https://partner.org/api/v1/user/verify'
```

Ответ:

```JSON
{
  "userUuid": "01-000000000000001",
  "hasBilling": false,
  "token": "<токен пользователя>"
}
```

### Вебхук-уведомление о создании нового магазина в Личном кабинете пользователя Эвотор

Для выполнения этого запроса облаку потребуется [токен пользователя](./doc_evotor_api_authorization.html#usersToken).

Запрос:

```
-X PUT --header 'Content-Type: application/json' --header 'Accept: application/json' --header 'Authorization: <токен пользователя>' -d '[{"uuid": "string", "name": "string", "address": "string"}]' 'https://partner.org/api/v1/inventories/stores'
```

Ответ:

```JSON
[
  {
    "uuid": "string",
    "parentId": "string",
  }
]
```

## Справочник API

Со всеми возможностями Облака Эвотор вы можете ознакомиться в [справочнике](https://api.evotor.ru/docs/).

Последние изменения в документации и API отражаются в разделе [**Что нового**](https://developer.evotor.ru/docs/whats_new.html).
